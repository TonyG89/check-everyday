{
  "resolvedId": "D:/js/work/Vue js/check-everyday/node_modules/vant/es/signature/Signature.mjs",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, onMounted, nextTick, defineComponent } from \"vue\";\nimport { inBrowser, makeNumberProp, makeStringProp, createNamespace, preventDefault } from \"../utils/index.mjs\";\nimport { useRect } from \"@vant/use\";\nimport { Button } from \"../button/index.mjs\";\nconst [name, bem, t] = createNamespace(\"signature\");\nconst signatureProps = {\n  tips: String,\n  type: makeStringProp(\"png\"),\n  penColor: makeStringProp(\"#000\"),\n  lineWidth: makeNumberProp(3),\n  clearButtonText: String,\n  backgroundColor: makeStringProp(\"\"),\n  confirmButtonText: String\n};\nconst hasCanvasSupport = () => {\n  var _a;\n  const canvas = document.createElement(\"canvas\");\n  return !!((_a = canvas.getContext) == null ? void 0 : _a.call(canvas, \"2d\"));\n};\nvar stdin_default = defineComponent({\n  name,\n  props: signatureProps,\n  emits: [\"submit\", \"clear\", \"start\", \"end\", \"signing\"],\n  setup(props, {\n    emit\n  }) {\n    const canvasRef = ref();\n    const wrapRef = ref();\n    const state = reactive({\n      width: 0,\n      height: 0,\n      ctx: null,\n      ratio: inBrowser ? window.devicePixelRatio : 1\n    });\n    let canvasRect;\n    const isRenderCanvas = inBrowser ? hasCanvasSupport() : true;\n    const touchStart = () => {\n      if (!state.ctx) {\n        return false;\n      }\n      state.ctx.beginPath();\n      state.ctx.lineWidth = props.lineWidth * state.ratio;\n      state.ctx.strokeStyle = props.penColor;\n      canvasRect = useRect(canvasRef);\n      emit(\"start\");\n    };\n    const touchMove = (event) => {\n      var _a, _b;\n      if (!state.ctx) {\n        return false;\n      }\n      preventDefault(event);\n      const touch = event.touches[0];\n      const mouseX = (touch.clientX - ((canvasRect == null ? void 0 : canvasRect.left) || 0)) * state.ratio;\n      const mouseY = (touch.clientY - ((canvasRect == null ? void 0 : canvasRect.top) || 0)) * state.ratio;\n      state.ctx.lineCap = \"round\";\n      state.ctx.lineJoin = \"round\";\n      (_a = state.ctx) == null ? void 0 : _a.lineTo(mouseX, mouseY);\n      (_b = state.ctx) == null ? void 0 : _b.stroke();\n      emit(\"signing\", event);\n    };\n    const touchEnd = (event) => {\n      preventDefault(event);\n      emit(\"end\");\n    };\n    const isCanvasEmpty = (canvas) => {\n      const empty = document.createElement(\"canvas\");\n      empty.width = canvas.width;\n      empty.height = canvas.height;\n      if (props.backgroundColor) {\n        const emptyCtx = empty.getContext(\"2d\");\n        setCanvasBgColor(emptyCtx);\n      }\n      return canvas.toDataURL() === empty.toDataURL();\n    };\n    const setCanvasBgColor = (ctx) => {\n      if (ctx && props.backgroundColor) {\n        ctx.fillStyle = props.backgroundColor;\n        ctx.fillRect(0, 0, state.width, state.height);\n      }\n    };\n    const submit = () => {\n      var _a, _b;\n      const canvas = canvasRef.value;\n      if (!canvas) {\n        return;\n      }\n      const isEmpty = isCanvasEmpty(canvas);\n      const image = isEmpty ? \"\" : ((_b = (_a = {\n        jpg: () => canvas.toDataURL(\"image/jpeg\", 0.8),\n        jpeg: () => canvas.toDataURL(\"image/jpeg\", 0.8)\n      })[props.type]) == null ? void 0 : _b.call(_a)) || canvas.toDataURL(`image/${props.type}`);\n      emit(\"submit\", {\n        image,\n        canvas\n      });\n    };\n    const clear = () => {\n      if (state.ctx) {\n        state.ctx.clearRect(0, 0, state.width, state.height);\n        state.ctx.closePath();\n        setCanvasBgColor(state.ctx);\n      }\n      emit(\"clear\");\n    };\n    onMounted(() => {\n      var _a, _b, _c;\n      if (isRenderCanvas) {\n        state.ctx = (_a = canvasRef.value) == null ? void 0 : _a.getContext(\"2d\");\n        state.width = (((_b = wrapRef.value) == null ? void 0 : _b.offsetWidth) || 0) * state.ratio;\n        state.height = (((_c = wrapRef.value) == null ? void 0 : _c.offsetHeight) || 0) * state.ratio;\n        nextTick(() => {\n          setCanvasBgColor(state.ctx);\n        });\n      }\n    });\n    return () => _createVNode(\"div\", {\n      \"class\": bem()\n    }, [_createVNode(\"div\", {\n      \"class\": bem(\"content\"),\n      \"ref\": wrapRef\n    }, [isRenderCanvas ? _createVNode(\"canvas\", {\n      \"ref\": canvasRef,\n      \"width\": state.width,\n      \"height\": state.height,\n      \"onTouchstartPassive\": touchStart,\n      \"onTouchmove\": touchMove,\n      \"onTouchend\": touchEnd\n    }, null) : _createVNode(\"p\", null, [props.tips])]), _createVNode(\"div\", {\n      \"class\": bem(\"footer\")\n    }, [_createVNode(Button, {\n      \"size\": \"small\",\n      \"onClick\": clear\n    }, {\n      default: () => [props.clearButtonText || t(\"clear\")]\n    }), _createVNode(Button, {\n      \"type\": \"primary\",\n      \"size\": \"small\",\n      \"onClick\": submit\n    }, {\n      default: () => [props.confirmButtonText || t(\"confirm\")]\n    })])]);\n  }\n});\nexport {\n  stdin_default as default,\n  signatureProps\n};\n",
      "start": 1698392050588,
      "end": 1698392050668,
      "sourcemaps": null
    },
    {
      "name": "vite:css",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "unplugin-vue-components",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1698392050668,
      "end": 1698392050668,
      "order": "normal"
    }
  ]
}
